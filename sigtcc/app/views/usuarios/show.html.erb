<p id="notice"><%= notice %></p>
<h2>Olá


<%=@tipo%> <%=@usuario.nome%> </h1>


<p>Email:
  <strong><%= @usuario.email %> </strong>
</p>

<!--Caso o usuário logado seja um aluno, será exibida essas informações -->

<% if @usuario.user.instance_of? Aluno %>
  <% if current_user.user.proposta_tcc.nil? %>
    <p>Você ainda não possui uma proposta de TCC cadastrada!</p> 
    <h4>Próximos Etapas:</h4>
    <input type="checkbox" name="status" value="proposta-TCC"  disabled> Cadastrar Proposta de TCC<br>
    <input type="checkbox" name="status" value="orientador-TCC"  disabled> Definir OOrientador definido<br>
    <input type="checkbox" name="status" value="planoat"  disabled> Plano de Atividades Cadastrado<br>
    <input type="checkbox" name="status" value="cadastrado-TCC"  disabled> TCC Cadastrado<br>
    <input type="checkbox" name="status" value="banca-agendada"  disabled> Banca Agendada<br>
    <input type="checkbox" name="status" value="TCC-defendido"  disabled> TCC Defendido<br>
    <%end%>

<!--Caso o usuário logado já tenha uma proposta cadastrada, mas não tenha um orientador -->

    <%if !current_user.user.proposta_tcc.nil?%>
      <h4>Seu Status:</h4>
      <input type="checkbox" name="status-proposta" value="proposta-TCC" checked disabled> Cadastrar Proposta de TCC<br> 
        <%if !current_user.user.proposta_tcc.tcc.nil?%> 
          <input type="checkbox" name="status-orientador" value="orientador-TCC" checked disabled> Definir Orientador<br>
        <%else%>
          <input type="checkbox" name="status-orientador" value="orientador-TCC"  disabled> Definir Orientador definido<br>
        <% end %>
        <%if !current_user.user.proposta_tcc.tcc.nil?%> 
           <% if !current_user.user.proposta_tcc.tcc.plano_atividade.nil? %>
            <input type="checkbox" name="status-plano" value="proposta-TCC" checked disabled> Cadastrar Plano de Atividades<br>
          <%else%>
            <input type="checkbox" name="status-plano" value="proposta-TCC" disabled> Cadastrar Plano de Atividades<br>
          <% end %>
            <%if !current_user.user.proposta_tcc.tcc.banca.nil?%>
              <input type="checkbox" name="status-tcc" value="proposta-TCC" checked disabled> Cadastrar TCC<br>
              <input type="checkbox" name="status-banca" value="proposta-TCC" checked disabled> Banca Agendada<br>
            <%else%>
              <input type="checkbox" name="status-banca" value="proposta-TCC"  disabled> Banca Agendada<br>
            <%end%>
        <%else%>
          <input type="checkbox" name="status-tcc" value="proposta-TCC"  disabled> Cadastrar TCC<br>
        <%end%>  
    <%end%>    
<!--<input type="checkbox" name="status-defendido" value="proposta-TCC"  disabled> TCC Defendido<br>-->


<!--Caso o usuário logado seja um professor será exibida essas opções -->

<% if @usuario.user.instance_of? Professor %>
  <% if !@usuario.user.tccs.nil? %>
    <table id= "tccs">
      <thead>
        <tr>
          <th>Titulo</th>
          <th>Periodo</th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>

        <% @usuario.user.tccs.each do |tcc| %>
          <tr>
            <td ><%= tcc.titulo %></td>
            <td ><%= tcc.periodo %></td>
            <% if tcc.agendad == true && tcc.banca.ata_defesa.nil? %>
              <td><%= link_to 'Gerar ata de defesa', controller: "ata_defesas", action: "new", tcc: tcc.id %></td>
            <%end%>
            <% if !tcc.banca.ata_defesa.nil? %>
              <td><%= link_to 'Editar ata de defesa', controller: "ata_defesas", action: "edit", tcc: tcc.id %></td>
            <%end%>
              <% if !tcc.banca.ata_defesa.nil? %>
                <td><%= link_to 'Apagar', {controller: "ata_defesas",  action: "destroy", tcc: tcc.id, }, :method => :delete, data: { confirm: 'Tem certeza que deseja excluir a ata?' } %></td>
              <td><%= link_to "Visualizar ata de defesa PDF",  ata_defesa_download_path(tcc.banca.ata_defesa, format: "pdf"),  target: "_blank",  class: "download" %></td>
              <td><%= link_to 'Visualizar arquivo ata defesa', tcc.banca.ata_defesa.arquivo.url %></td>
              <%end%>
          </tr>
        <% end %>
      </tbody>
    </table>
  <%end%>
<%end%>
<%end%>
<h2><%= link_to "Consultar TCCs", consulta_path %></h2>
<h2>Atas de defesa</h2>
